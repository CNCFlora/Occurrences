{{> header}}

<h2 class='col-md-12'>{{strings.search}}</h2>

<form action="{{base}}/search" class='col-md-12'>
    <fieldset>
        <p id="input-taxon-search">
            <input class="form-control" type="text" name="q" placeholder="{{strings.search}}..." value="{{query}}">
        </p>
        <p id="button-taxon-search">
            <button class="btn btn-primary" type="search"><span class='glyphicon glyphicon-search'></span> {{strings.search}}</button>
            {{#role-sig}}
            <a href="{{base}}/editor?q={{query}}" class="btn btn-default btn-small">
                <span class='glyphicon glyphicon-edit'></span>
                {{strings.table-editor}}
            </a>
            {{/role-sig}}
        </p>
    </fieldset>
</form>

<div class="col-md-12">
    <h3>{{strings.results}}</h3>

    {{#stats}}
    <table class='table'>
        <thead>
            <tr>
                <th>{{strings.eoo}}</th>
                <th>{{strings.aoo}}</th>
                <th>{{strings.valid}}</th>
                <th>{{strings.invalid}}</th>
                <th>{{strings.reviewed}}</th>
                <th>{{strings.validated}}</th>
                <th>{{strings.not-reviewed}}</th>
                <th>{{strings.not-validated}}</th>
                <th>{{strings.total}}</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="eoo">{{eoo}}</td>
                <td id="aoo">{{aoo}}</td>
                <td id="valid">{{valid}}</td>
                <td id="invalid">{{invalid}}</td>
                <td id="reviewed">{{reviewed}}</td>
                <td id="validated">{{validated}}</td>
                <td id="not_reviewed">{{not_reviewed}}</td>
                <td id="not_validated">{{not_validated}}</td>
                <td id="total">{{total}}</td>
            </tr>
        </tbody>
    </table>
    {{/stats}}


    <a name="map"></a>
    <div id="map"></div>

    <script type="text/javascript">
        var occurrences = [] ;
    </script>

    {{#result}}
        <a name="occ-{{occurrenceID}}-unit"></a>
        <script>
            occurrences.push({{{json}}});
        </script>
        <div id="occ-{{occurrenceID}}-unit" class='col-md-6' >
            {{> unit}}
        </div>
        {{> forms}}
    {{/result}}

</div>

<link rel="stylesheet" href="{{base}}/css/leaflet.css" />
<link rel="stylesheet" href="{{base}}/css/MarkerCluster.css" />
<link rel="stylesheet" href="{{base}}/css/MarkerCluster.Default.css" />
<script type="text/javascript" src="{{base}}/js/leaflet.js"></script>
<script type="text/javascript" src="{{base}}/js/leaflet.markercluster.js"></script>
<script type="text/javascript" src='{{base}}/js/map.js'></script>

{{> footer}}
